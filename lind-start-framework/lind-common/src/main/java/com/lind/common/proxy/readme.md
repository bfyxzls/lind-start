# jdk动态代码
* 只能代理接口，可以定义一类需要代理的接口，可以通过注解去标识他们，后台在代理时根据注解去添加代理类
* proxy代理类里写核心逻辑
* proxyFactoryBean用来构建proxy的工厂bean
* CarBeanDefinitionRegistry用来注册bean
# ImportBeanDefinitionRegistrar
ImportBeanDefinitionRegistrar是spring对外提供动态注册beanDefinition的接口，spring内部大部分套路也是用该接口进行动态注册beanDefinition的。
ImportBeanDefinitionRegistrar接口不是直接注册Bean到IOC容器，它的执行时机比较早，准确的说更像是注册Bean的定义信息以便后面的Bean的创建。
ImportBeanDefinitionRegistrar接口提供了registerBeanDefinitions方便让子类进行重写。该方法提供BeanDefinitionRegistry类型的参数，让开发者调用BeanDefinitionRegistry的registerBeanDefinition方法传入BeanDefinitionName和对应的BeanDefinition对象，直接往容器中注册。
ImportBeanDefinitionRegistrar 通常和@Import注解配合使用。@Import会将ImportBeanDefinitionRegistrar的实现类注入到spring 容器中。从而spring 容器可以遍历调用 ImportBeanDefinitionRegistrar接口的 registerBeanDefinitions方法。
> 注意：这里我们可以注册FactoryBean的BeanDefinition，给FactoryBean设置动态参数。将要注册的真正要注入的bean作为参数，然后让spring容器利用这个FactoryBean的构造方法进行实例化。（通过setAutowireMode(3)）mybatis整合spring的底层就是这么实现的。
